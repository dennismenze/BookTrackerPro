{% extends "base.html" %}

{% block title %}Home - Book Tracker{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">My Book Library</h1>

<div class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Add a New Book</h2>
    <form id="add-book-form" class="space-y-4">
        <div>
            <label for="book-title" class="block">Title:</label>
            <input type="text" id="book-title" name="title" required class="w-full p-2 border rounded">
        </div>
        <div>
            <label for="book-author" class="block">Author:</label>
            <input type="text" id="book-author" name="author" required class="w-full p-2 border rounded">
        </div>
        <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Add Book</button>
    </form>
</div>

<div class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Search Books</h2>
    <div class="flex space-x-2">
        <input type="text" id="book-search" name="book-search" placeholder="Search books..." class="w-full p-2 border rounded">
        <button onclick="searchBooks()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Search</button>
    </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <div>
        <h2 class="text-2xl font-bold mb-4">My Books</h2>
        <ul id="book-list" class="space-y-4"></ul>
    </div>
    <div>
        <h2 class="text-2xl font-bold mb-4">Book Details</h2>
        <div id="book-details" class="border p-4 rounded"></div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
<script src="{{ url_for('static', filename='js/book.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        console.log('DOMContentLoaded event fired');
        loadBooks();
        const addBookForm = document.getElementById('add-book-form');
        addBookForm.addEventListener('submit', (e) => {
            console.log('Form submit event triggered');
            e.preventDefault();
            const title = document.getElementById('book-title').value;
            const author = document.getElementById('book-author').value;
            addBook(title, author);
        });
    });
</script>
{% endblock %}
